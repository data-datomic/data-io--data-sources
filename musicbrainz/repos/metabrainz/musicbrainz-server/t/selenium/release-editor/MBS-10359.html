<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="http://localhost:5000" />
<title>MBS-10359</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">MBS-10359</td></tr>
</thead>
<tbody>
<tr>
	<td>openFile</td>
	<td>./seeds/mbs-10359.html</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>css=button[type=submit]</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>500</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>xpath=//td[contains(@class, 'release-artist')]//span[contains(@class, 'autocomplete')]//img[contains(@class, 'search')]</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>1000</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>xpath=//li[contains(@class, 'ui-menu-item')][contains(., 'Bing Crosby')]</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>xpath=//a[@href='#tracklist']</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>xpath=//div[@id="tracklist-tools"]//button[contains(text(), "Guess feat.")]</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>xpath=(//tr[contains(@id, "track-row-new")])[2]//button[contains(@class, "open-ac")]</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>xpath=(//div[contains(@id, "artist-credit-bubble")]//span[contains(@class, "autocomplete")])[2]//img[contains(@class, "search")]</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>1000</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>xpath=//li[contains(@class, 'ui-menu-item')][contains(., 'David Bowie')]</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>xpath=//div[contains(@id, "artist-credit-bubble")]//button[contains(text(), "Next")]</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>xpath=(//div[contains(@id, "artist-credit-bubble")]//span[contains(@class, "autocomplete")])[2]//img[contains(@class, "search")]</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>1000</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>xpath=//li[contains(@class, 'ui-menu-item')][contains(., 'David Bowie')]</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>xpath=//div[contains(@id, "artist-credit-bubble")]//button[contains(text(), "Done")]</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>xpath=//a[@href='#edit-note']</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>id=enter-edit</td>
	<td></td>
</tr>
<tr>
	<td>assertEval</td>
	<td>Array.from(document.querySelectorAll('table.medium > tbody > tr')).slice(1).map(x => Array.from(x.querySelectorAll('td')).filter(x => !x.classList.contains('rating')).map(x => x.textContent.trim().replace(/\s*(Recording artist:)\s*([^\n]+)/, '\t$1 $2')).join('\t')).join('\n')</td>
	<td>1	track1	Bing Crosby	?:??
2	track2	Bing Crosby feat. David Bowie	?:??
3	track3	Bing Crosby feat. David Bowie	?:??</td>
</tr>
<tr>
	<td>assertEditData</td>
	<td>3</td>
	<td>
		{
		  "type": 51,
		  "status": 2,
		  "data": {
		    "name": "",
		    "release": {
		      "id": 1,
		      "name": "MBS-10359"
		    },
		    "position": 1,
		    "entity_id": 1,
		    "format_id": 12,
		    "tracklist": [
		      {
		        "id": null,
		        "name": "track1",
		        "length": null,
		        "number": "1",
		        "position": 1,
		        "recording_id": 1,
		        "artist_credit": {
		          "names": [
		            {
		              "name": "Bing Crosby",
		              "artist": {
		                "id": 99,
		                "name": "Bing Crosby"
		              },
		              "join_phrase": ""
		            }
		          ]
		        },
		        "is_data_track": "0"
		      },
		      {
		        "id": null,
		        "name": "track2",
		        "length": null,
		        "number": "2",
		        "position": 2,
		        "recording_id": 2,
		        "artist_credit": {
		          "names": [
		            {
		              "name": "Bing Crosby",
		              "artist": {
		                "id": 99,
		                "name": "Bing Crosby"
		              },
		              "join_phrase": " feat. "
		            },
		            {
		              "name": "David Bowie",
		              "artist": {
		                "id": 956,
		                "name": "David Bowie"
		              },
		              "join_phrase": ""
		            }
		          ]
		        },
		        "is_data_track": "0"
		      },
		      {
		        "id": null,
		        "name": "track3",
		        "length": null,
		        "number": "3",
		        "position": 3,
		        "recording_id": 3,
		        "artist_credit": {
		          "names": [
		            {
		              "name": "Bing Crosby",
		              "artist": {
		                "id": 99,
		                "name": "Bing Crosby"
		              },
		              "join_phrase": " feat. "
		            },
		            {
		              "name": "David Bowie",
		              "artist": {
		                "id": 956,
		                "name": "David Bowie"
		              },
		              "join_phrase": ""
		            }
		          ]
		        },
		        "is_data_track": "0"
		      }
		    ]
		  }
		}
	</td>
</tr>
</tbody>
</table>
</body>
</html>
